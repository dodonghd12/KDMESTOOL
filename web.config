<?xml version="1.0" encoding="utf-8"?>
<!-- 
  CẤU HÌNH QUAN TRỌNG:
  1. Chạy lệnh: wfastcgi-enable (sau khi cài wfastcgi)
  2. Lấy scriptProcessor từ output của lệnh trên
  3. Thay thế scriptProcessor trong dòng <add name="PythonHandler"...> bên dưới
  4. Sửa PYTHONPATH cho đúng đường dẫn project trên server
-->
<configuration>
  <system.webServer>
    <handlers>
      <!-- 
        THAY THẾ scriptProcessor bằng giá trị từ script find_wfastcgi.ps1 hoặc lệnh: python -m pip show wfastcgi
        Ví dụ: scriptProcessor="C:\Users\kenda\AppData\Local\Programs\Python\Python313\python.exe|C:\Users\kenda\AppData\Local\Programs\Python\Python313\Lib\site-packages\wfastcgi.py"
      -->
      <add name="PythonHandler" path="*" verb="*" modules="FastCgiModule" scriptProcessor="C:\Users\kenda\AppData\Local\Programs\Python\Python313\python.exe|C:\Users\kenda\AppData\Local\Programs\Python\Python313\Lib\site-packages\wfastcgi.py" resourceType="Unspecified" requireAccess="Script" />
    </handlers>
    <!-- 
      Đã xóa staticContent vì MIME types đã được định nghĩa ở cấp cao hơn trong IIS
      Nếu cần thêm MIME types, hãy thêm vào IIS Manager thay vì web.config
    -->
    <defaultDocument>
      <files>
        <clear />
      </files>
    </defaultDocument>
  </system.webServer>
  <appSettings>
    <!-- THAY ĐỔI đường dẫn này cho đúng với đường dẫn project trên server -->
    <!-- Từ lỗi, project của bạn ở: E:\KV2_Services\KDMES\KDMESTOOL -->
    <add key="PYTHONPATH" value="E:\KV2_Services\KDMES\KDMESTOOL" />
    <add key="WSGI_HANDLER" value="app.app" />
  </appSettings>
</configuration>

